{% extends "base.html" %}

{% block title %}Регистрация - Приложение Taskboard{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/auth.css">
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h2>Создать аккаунт</h2>
        <form id="registerForm">
            <div class="form-group">
                <label for="name">Имя *</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="surname">Фамилия *</label>
                <input type="text" id="surname" name="surname" required>
            </div>
            
            <div class="form-group">
                <label for="patronym">Отчество</label>
                <input type="text" id="patronym" name="patronym">
            </div>
            
            <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="password">Пароль *</label>
                <input type="password" id="password" name="password" required>
            </div>
            
            <div class="form-group">
                <label for="password_repeat">Повторите пароль *</label>
                <input type="password" id="password_repeat" name="password_repeat" required>
            </div>
            
            <div id="registerError" class="error-message"></div>
            
            <button type="submit" class="btn btn-primary btn-block">Зарегистрироваться</button>
        </form>
        
        <div class="auth-footer">
            <p>Уже есть аккаунт? <a href="/login/">Войдите здесь</a></p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/auth.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', async function() {
        // Check if user is already authenticated and redirect to profile
        await redirectIfAuthenticated();
        
        const form = document.getElementById('registerForm');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            register();
        });
    });
</script>
{% endblock %}
